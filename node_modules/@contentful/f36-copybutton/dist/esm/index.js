import d, { useState, useCallback } from 'react';
import { CopyIcon } from '@contentful/f36-icons';
import { Tooltip } from '@contentful/f36-tooltip';
import { Button } from '@contentful/f36-button';
import { cx, css } from 'emotion';

var L=Object.defineProperty,F=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var P=(t,o,e)=>o in t?L(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))h.call(o,e)&&P(t,e,o[e]);if(m)for(var e of m(o))E.call(o,e)&&P(t,e,o[e]);return t},C=(t,o)=>F(t,N(o));var g=(t,o)=>{var e={};for(var n in t)h.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&m)for(var n of m(t))o.indexOf(n)<0&&E.call(t,n)&&(e[n]=t[n]);return e};var T=(t,o,e)=>new Promise((n,i)=>{var s=r=>{try{a(e.next(r));}catch(l){i(l);}},c=r=>{try{a(e.throw(r));}catch(l){i(l);}},a=r=>r.done?n(r.value):Promise.resolve(r.value).then(s,c);a((e=e.apply(t,o)).next());});var w=({size:t})=>{let o=t==="small"?"32px":"40px";return {button:css({height:o,minHeight:"auto",minWidth:"auto",width:o})}};function H(A,M){var B=A,{className:t,isDisabled:o=!1,isLoading:e=!1,label:n,onBlur:i,onCopy:s,size:c="medium",testId:a="cf-ui-copy-button",tooltipCopiedText:r="Copied!",tooltipProps:l,tooltipText:k="Copy to clipboard",value:u}=B,I=g(B,["className","isDisabled","isLoading","label","onBlur","onCopy","size","testId","tooltipCopiedText","tooltipProps","tooltipText","value"]);let z=w({size:c}),[y,x]=useState(!1),S=useCallback(()=>T(this,null,function*(){try{yield window.navigator.clipboard.writeText(u);}catch(b){let p=document.createElement("input");p.style.display="none",document.body.appendChild(p),p.value=u,p.focus(),p.select();let v=document.execCommand("copy");if(v==="unsuccessful")throw new Error("Unable to copy value",{cause:v});p.remove();return}s==null||s(u),x(!0);}),[s,u]),D=b=>{y&&x(!1),i==null||i(b);};return d.createElement(Tooltip,C(f({content:y?r:k},l),{isDisabled:o}),d.createElement(Button,C(f({"aria-label":y?"Value copied to clipboard":n!=null?n:"Copy to clipboard","aria-live":"assertive",className:cx(z.button,t),isDisabled:e||o,isLoading:e,onBlur:D,testId:a},I),{onClick:S,ref:M,startIcon:d.createElement(CopyIcon,{variant:"muted",size:c==="small"?"tiny":"small"}),variant:"secondary"})))}H.displayName="CopyButton";var q=d.forwardRef(H);

export { q as CopyButton };
//# sourceMappingURL=index.js.map